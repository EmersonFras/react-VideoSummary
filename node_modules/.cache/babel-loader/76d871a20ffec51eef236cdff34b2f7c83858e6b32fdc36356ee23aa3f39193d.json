{"ast":null,"code":"var _jsxFileName = \"/home/emersonfrasure/Projects/react-VideoSummary/src/features/videos/EditVideoForm.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useUpdateVideoMutation, useDeleteVideoMutation } from \"./videosApiSlice\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSave, faTrashCan } from \"@fortawesome/free-solid-svg-icons\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TITLE_REGEX = /^[A-z0-9]{3,20}$/;\nconst DESCRIPTION_REGEX = /^[A-z0-9!@#$%]{0,100}$/;\nconst EditVideoForm = ({\n  video\n}) => {\n  _s();\n  var _ref, _error$data, _delError$data;\n  const [updateVideo, {\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  }] = useUpdateVideoMutation();\n  const [deleteVideo, {\n    isSuccess: isDelSuccess,\n    isError: isDelError,\n    error: delError\n  }] = useDeleteVideoMutation();\n  const navigate = useNavigate();\n  const [title, setTitle] = useState(video.title);\n  const [validTitle, setValidTitle] = useState(false);\n  const [description, setDescription] = useState(video.description);\n  const [validDescription, setValidDescription] = useState(false);\n  useEffect(() => {\n    setValidTitle(TITLE_REGEX.test(title));\n  }, [title]);\n  useEffect(() => {\n    setValidDescription(DESCRIPTION_REGEX.test(description));\n  });\n  useEffect(() => {\n    if (isSuccess || isDelSuccess) {\n      setTitle('');\n      setDescription('');\n      navigate('/dash/videos');\n    }\n  }, [isSuccess, isDelSuccess, navigate]);\n  const onTitleChanged = e => setTitle(e.target.value);\n  const onDescriptionChanged = e => setDescription(e.target.value);\n  const onSaveVideoClicked = async e => {\n    await updateVideo({\n      id: video.id,\n      title,\n      description\n    });\n  };\n  const onDeleteVideoClicked = async e => {\n    await deleteVideo({\n      id: video.id\n    });\n  };\n  let canSave = [validTitle, validDescription].every(Boolean) && !isLoading;\n  const errClass = isError || isDelError ? \"errmsg\" : \"offscreen\";\n  const validTitleClass = !validTitle ? \"form__input--incomplete\" : \"\";\n  const validDescriptionClass = !validDescription ? \"form__input--incomplete\" : \"\";\n  const errContent = (_ref = (error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.message) || (delError === null || delError === void 0 ? void 0 : (_delError$data = delError.data) === null || _delError$data === void 0 ? void 0 : _delError$data.message)) !== null && _ref !== void 0 ? _ref : '';\n  const content = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: errClass,\n      children: errContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: e => e.preventDefault(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__title-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Edit Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__action-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"icon-button\",\n            title: \"Save\",\n            onClick: onSaveVideoClicked,\n            disabled: !canSave,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSave\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"icon-button\",\n            title: \"Delete\",\n            onClick: onDeleteVideoClicked,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTrashCan\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"title\",\n        children: [\"Title: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"nowrap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `form__input ${validTitleClass}`,\n        id: \"title\",\n        name: \"title\",\n        type: \"text\",\n        autoComplete: \"off\",\n        value: title,\n        onChange: onTitleChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form__label\",\n        htmlFor: \"description\",\n        children: [\"Description: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"nowrap\",\n          children: \"[4-12 chars incl. !@#$%]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `form__input ${validDescriptionClass}`,\n        id: \"description\",\n        name: \"description\",\n        type: \"description\",\n        value: description,\n        onChange: onDescriptionChanged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n  return content;\n};\n_s(EditVideoForm, \"rxQmUi+A8jAbaLik9EwmSurLKxw=\", false, function () {\n  return [useUpdateVideoMutation, useDeleteVideoMutation, useNavigate];\n});\n_c = EditVideoForm;\nexport default EditVideoForm;\nvar _c;\n$RefreshReg$(_c, \"EditVideoForm\");","map":{"version":3,"names":["useState","useEffect","useUpdateVideoMutation","useDeleteVideoMutation","useNavigate","FontAwesomeIcon","faSave","faTrashCan","jsxDEV","_jsxDEV","Fragment","_Fragment","TITLE_REGEX","DESCRIPTION_REGEX","EditVideoForm","video","_s","_ref","_error$data","_delError$data","updateVideo","isLoading","isSuccess","isError","error","deleteVideo","isDelSuccess","isDelError","delError","navigate","title","setTitle","validTitle","setValidTitle","description","setDescription","validDescription","setValidDescription","test","onTitleChanged","e","target","value","onDescriptionChanged","onSaveVideoClicked","id","onDeleteVideoClicked","canSave","every","Boolean","errClass","validTitleClass","validDescriptionClass","errContent","data","message","content","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","preventDefault","onClick","disabled","icon","htmlFor","name","type","autoComplete","onChange","_c","$RefreshReg$"],"sources":["/home/emersonfrasure/Projects/react-VideoSummary/src/features/videos/EditVideoForm.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport { useUpdateVideoMutation, useDeleteVideoMutation } from \"./videosApiSlice\"\nimport { useNavigate } from \"react-router-dom\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faSave, faTrashCan } from \"@fortawesome/free-solid-svg-icons\"\n\n\n\nconst TITLE_REGEX = /^[A-z0-9]{3,20}$/\nconst DESCRIPTION_REGEX = /^[A-z0-9!@#$%]{0,100}$/\n\nconst EditVideoForm = ({ video }) => { \n\n  const [updateVideo, {\n    isLoading,\n    isSuccess,\n    isError,\n    error\n  }] = useUpdateVideoMutation()\n\n  const [deleteVideo, {\n    isSuccess: isDelSuccess,\n    isError: isDelError,\n    error: delError\n  }] = useDeleteVideoMutation()\n\n  const navigate = useNavigate()\n\n  const [title, setTitle] = useState(video.title)\n  const [validTitle, setValidTitle] = useState(false)\n  const [description, setDescription] = useState(video.description)\n  const [validDescription, setValidDescription] = useState(false)\n\n  useEffect(() => {\n    setValidTitle(TITLE_REGEX.test(title))\n  }, [title])\n\n  useEffect(() => {\n    setValidDescription(DESCRIPTION_REGEX.test(description))\n  })\n\n  useEffect(() => {\n    if (isSuccess || isDelSuccess) {\n      setTitle('')\n      setDescription('')\n      navigate('/dash/videos')\n    }\n  }, [isSuccess, isDelSuccess, navigate])\n\n  const onTitleChanged = e => setTitle(e.target.value)\n  const onDescriptionChanged = e => setDescription(e.target.value)\n\n  const onSaveVideoClicked = async (e) => {\n    await updateVideo({ id: video.id, title, description })\n  }\n\n  const onDeleteVideoClicked = async (e) => {\n    await deleteVideo({ id: video.id })\n  }\n\n  let canSave = [validTitle, validDescription].every(Boolean) && !isLoading\n\n  const errClass = (isError || isDelError) ? \"errmsg\" : \"offscreen\"\n  const validTitleClass = !validTitle ? \"form__input--incomplete\" : \"\"\n  const validDescriptionClass = !validDescription ? \"form__input--incomplete\" : \"\"\n\n  const errContent = (error?.data?.message || delError?.data?.message) ?? ''\n\n  const content = (\n    <>\n        <p className={errClass}>{errContent}</p>\n\n        <form className=\"form\" onSubmit={e => e.preventDefault()}>\n            <div className=\"form__title-row\">\n                <h2>Edit Video</h2>\n                <div className=\"form__action-buttons\">\n                    <button className=\"icon-button\" title=\"Save\" onClick={onSaveVideoClicked} disabled={!canSave}>\n                        <FontAwesomeIcon icon={faSave} />\n                    </button>\n                    <button className=\"icon-button\" title=\"Delete\" onClick={onDeleteVideoClicked}>\n                        <FontAwesomeIcon icon={faTrashCan} />\n                    </button>\n                </div>\n            </div>\n            <label className=\"form__label\" htmlFor=\"title\">\n                Title: <span className=\"nowrap\"></span></label>\n            <input \n                className={`form__input ${validTitleClass}`} \n                id=\"title\" \n                name=\"title\" \n                type=\"text\" \n                autoComplete=\"off\" \n                value={title} \n                onChange={onTitleChanged} \n            />\n            <label className=\"form__label\" htmlFor=\"description\">\n                Description: <span className=\"nowrap\">[4-12 chars incl. !@#$%]</span></label>\n            <input \n                className={`form__input ${validDescriptionClass}`} \n                id=\"description\" \n                name=\"description\" \n                type=\"description\" \n                value={description} \n                onChange={onDescriptionChanged} \n            />\n        </form>\n    </>\n)\n\n  return content\n}\n\nexport default EditVideoForm"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}